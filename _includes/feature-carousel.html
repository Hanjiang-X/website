<div>
  {% if include.title %}
    <p class="feature-title
      {% if include.align %}
        {{ include.align }}
      {% endif %}
    ">{{ include.title }}</p>
  {% endif %}

  <div class="feature" {% if include.flip %} data-flip {% endif %}>
    <div class="feature-image" style="position: relative;">
      {% assign image_list = include.images | split: "," %}
      {% for img in image_list %}
        <img
          class="carousel-slide"
          {% if include.fit %} img-fit {% endif %}
          src="{{ img | strip | relative_url }}"
          loading="lazy"
          alt="SPR image {{ forloop.index }}"
          style="width: 100%; display: none; border-radius: 6px;"
          {% include fallback.html %}
        >
      {% endfor %}

      <button class="carousel-button prev" onclick="plusSlides(-1)">&#10094;</button>
      <button class="carousel-button next" onclick="plusSlides(1)">&#10095;</button>
    </div>

    <div class="feature-text">
      {{ include.text | markdownify }}
    </div>
  </div>
</div>

<style>
.carousel-button {
  position: absolute;
  top: 50%;
  background-color: rgba(0,0,0,0.4);
  color: white;
  border: none;
  padding: 10px 14px;
  font-size: 18px;
  cursor: pointer;
  transform: translateY(-50%);
  border-radius: 4px;
  z-index: 2;
}
.carousel-button:hover {
  background-color: rgba(0,0,0,0.6);
}
.carousel-button.prev {
  left: 10px;
}
.carousel-button.next {
  right: 10px;
}
</style>

<script>
let slideIndex = 0;
function showSlides(n) {
  const slides = document.querySelectorAll(".carousel-slide");
  if (!slides.length) return;
  slideIndex = (n + slides.length) % slides.length;
  slides.forEach((slide, i) => {
    slide.style.display = (i === slideIndex) ? "block" : "none";
  });
}
function plusSlides(n) {
  showSlides(slideIndex + n);
}
document.addEventListener("DOMContentLoaded", () => {
  showSlides(0);
});
</script>
